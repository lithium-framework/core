{"mappings":"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","sources":["src/index.ts","src/dom/index.ts","src/utils/observable-object/models.ts","src/decorators/index.ts","src/decorators/attributeState.ts","src/decorators/state.ts","src/directives/index.ts","src/directives/assyncAppend.ts","src/directives/ref.ts","src/directives/state.ts","src/directives/style.ts","src/directives/until.ts","src/utils/index.ts","src/utils/observable-object/index.ts","src/webComponent/index.ts","src/webComponent/model.ts"],"sourcesContent":["export * from './dom';\nexport * from './decorators';\nexport * from './directives';\nexport * from './utils';\nexport * from './webComponent';\n\n// import { MainApplication } from './dom/index.js';\n\n// namespace Lithium{\n//   export const DOM = require('./dom/index.js');\n//   export const Decorators = require('./decorators/index.js');\n//   export const Directives = require('./directives/index.js');\n//   export const Utils = require('./utils/index.js');\n//   export const Component = require('./webComponent/index.js');\n// };\n\n// export default Lithium;\n\n// (() => {\n\n//   if(globalThis.window){\n\n//     window['lithium'] = {\n\n//     };\n\n//   }\n  \n// })()","import { ViewTemplate } from '@microsoft/fast-element/dist/esm';\nimport { ObservableObject } from '../utils/observable-object/models';\nimport { state } from '../decorators';\n\nexport class ViewExecutionContext< T = any , States extends Record<string , any> = Record<string , any> >{\n\n  $states = ObservableObject.init< any , any >({});\n  get states(){ return this.$states }\n  #_state_keys:string[] = [];\n  \n  createState = <T>( key:keyof States , value:T ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    if(this.#_state_keys.includes(key as string))return this.useState( key );\n\n    Object.defineProperty( this , key , {\n      get(){\n        return JSON.parse(this.states[key]);\n      },\n      set( value ){\n        \n        if(!this.#_state_keys.includes(key)){\n\n          this.#_state_keys.push( key );\n\n          this.$states = ObservableObject.init({\n            [key] :  JSON.stringify(value),\n            ...Object.fromEntries(\n              new Map(\n                Array.from( this.#_state_keys , ( key ) => {\n                  return [ key , this.$states[`${key}`] ]\n                } )\n              )\n            )\n          });\n\n        }\n\n        this.$states[key] = JSON.stringify(value);\n\n      }\n    });\n\n    this[key as string] = value;\n    return this.useState( key );\n\n  }\n\n  useState = <T>( key:keyof States ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    return [ this[key as string] , ( newValue ) => {\n      console.log({ newValue })\n      this[key as string] = newValue;\n    } ];\n\n  }\n\n  createConsumable = <T = any>( key:string , value:T ) => {\n    state( this , key , value , false );\n  }\n\n  constructor( data?:T ){\n      Object.assign( this , data );\n  }\n\n  static init< T extends Record<string , any> = {} >( data?:T ):ViewContext<T>{\n      return new ViewExecutionContext( data ) as any as ViewContext<T>;\n  }\n\n}\n\nexport type ViewContext< T = Record<string , any> , States = Record<string , any> > = ViewExecutionContext<T , States> & T;\n\nexport function render< T extends Record<string , any> = {} , Storage extends Record<string , any> = Record<string , any> >(template: ViewTemplate<ViewExecutionContext<any, Record<string, any>>, any>, container: HTMLElement = document.body , data = {} ) {\n\n  let context = ViewExecutionContext.init(data);\n  return template.render( context , container);\n\n}","import { Observable } from \"@microsoft/fast-element\";\n\nexport class ObservableObject< key extends string , value extends any = any > extends Object{\n\n  static init< key extends string , value extends any >( initialObject:Record<key , value> ){\n    let observabe = new ObservableObject< key , value >( initialObject );\n    return observabe.createProxy();\n  }\n\n  $data:Record<string , value> = {};\n\n  constructor( initialObject:Record<key , value> ){\n    super();\n\n    Object.keys( initialObject ).forEach(( key:any ) => {\n      this.set( key , initialObject[key] );\n    })\n\n  };\n\n  set = <T extends value = any>( key:key , value:T ) => {   \n\n    this.$data[`_${key}`] = value as any;\n    Observable.defineProperty( this.$data, key);\n    return this.$data[key];\n\n  }\n\n  createProxy(){\n\n    return new Proxy( this.$data , {\n      get( store , propKey:string ){\n\n        let result:any = undefined;\n\n        try{\n          result = store[propKey];\n        }\n        catch(error){\n          console.error(error);\n        }\n        finally{\n          return result;\n        }\n\n      },\n      set( store , propKey: string, value: any ){\n\n        if(store[propKey]){\n          store[propKey] = value;\n        }\n        else {\n          store[ `_${propKey}` ] = value;\n          Observable.defineProperty( store, propKey);\n        }\n\n        return true;\n  \n      }\n    })\n\n  }\n\n}\n\nexport { Observable };","export * from './attributeState';\nexport * from './state';","import { DecoratorAttributeConfiguration, attr } from \"@microsoft/fast-element\";\nimport { state } from './state';\n\n/**\n * @AttributeState decorator\n * A decorator to define a property as both an attribute and a state on a WebComponent.\n * This combines the behavior of @attr and @State decorators.\n * \n * @param {DecoratorAttributeConfiguration} options - Options to configure the attribute.\n * @returns {Function} - The decorator function.\n * \n * @example\n * ```typescript\n * // Define an editable title component using the AttributeState decorator\n * \n * customElement({\n *     name: 'editable-title',\n *     template : html`...`\n * })\n * class EditableTitle extends WebComponent {\n *     AttributeState() level: number = 2;\n *     AttributeState() editable: string = \"false\";\n *     State value: string = \"Hello World\";\n * \n *     handleInput(event) {\n *         this.value = event.target.innerText;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();\n *     }\n * }\n * ```\n */\nexport function attrState( options:DecoratorAttributeConfiguration = {} ){\n\n  return ( target, propertyKey: string ) => {\n    attr( options )( target , propertyKey );\n    state( target , propertyKey );\n  }\n\n}\n\nexport { attr };","import { observable } from \"@microsoft/fast-element\";\n\n/**\n * @State decorator\n * A decorator to define a state property on a WebComponent.\n * This state property is observable, and its changes are detected and handled.\n * \n * @param {Object} target - The prototype of the class where the state property is defined.\n * @param {string} propertyKey - The name of the property to be defined as a state.\n * \n * @example\n * ```typescript\n * /// Define a counter component using the State decorator\n\n * customElement({\n *     name: 'counter-element',\n *     template: html`...`\n * })\n * class CounterElement extends WebComponent {\n *     State count: number = 0;\n * \n *     increment() {\n *         this.count += 1;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();s\n *     }\n * }\n * ```\n */\nexport function state(target, propertyKey: string , value:any = null , constructible = false){\n\n  if(constructible)target.constructor.states = target.constructor.states || {};\n\n  Object.defineProperty( target , propertyKey , {\n    get(){\n      return target.$states[propertyKey];\n    },\n    set(newValue){\n      target.$states[propertyKey] = newValue;\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  } );\n\n  observable(target, propertyKey);\n\n  if(value)target[propertyKey] = value;\n\n}","import {\n  when,\n  repeat,\n  // ref,\n  children,\n  elements,\n  slotted,\n} from '@microsoft/fast-element';\n\nexport {\n  when,\n  repeat,\n  children,\n  elements,\n  slotted\n}\n\nexport * from './assyncAppend.js';\nexport * from './ref.js';\nexport * from './state.js';\nexport * from './style.js';\nexport * from './until.js';","import { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , html , Binding } from '@microsoft/fast-element';\nimport type { Subscriber , BindingDirective, ExpressionObserver } from '@microsoft/fast-element';\n\nexport class AsyncAppendBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class AsyncAppendDirective<T = any> extends HTMLBindingDirective {\n\n  fn:Promise<T> = null;\n  callback:( result:T ) => ViewTemplate = null;\n\n  constructor( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) {\n    super( new AsyncAppendBindig( (x) => null ) );\n    Object.assign( this , { fn , callback } );\n  }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n\n    return {\n        bind : (source:HTMLView ) => {\n\n          let target = source.targets[targetNodeId];\n\n          this.fn\n          .then(( result ) => {\n            this.callback( result ).render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n          .catch(( error ) => {\n            console.error(error)\n            html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ){\n    return new AsyncAppendDirective( fn , callback);\n  }\n\n}\n\nHTMLDirective.define( AsyncAppendDirective );\n\nexport { Subscriber }\n\nexport const asyncAppend = <T = any>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) => AsyncAppendDirective.use<T>( fn , callback );","import { HTMLDirective, HTMLView, Binding, BindingDirective, ExpressionObserver, Subscriber, StatelessAttachedAttributeDirective } from '@microsoft/fast-element';\n\nexport interface IElementRef< T extends Node >{\n  value : T;\n}\n\nexport function createRef< T extends Node >():IElementRef<T>{\n  return {\n    value : null\n  }\n}\n\nexport class RefDirective<T extends Node> extends StatelessAttachedAttributeDirective<IElementRef<T>> {\n\n  options:IElementRef<T> = null;\n\n  constructor( options:IElementRef<T> ) {\n    super( options );\n    Object.assign( this , { options } )\n  }\n\n  bind(controller: HTMLView): void {\n\n    let { lastChild:target } = controller;\n\n    this.options.value = target as any;\n\n  }\n\n  static use<T extends Node>( options:IElementRef<T> ){\n    return new RefDirective<T>( options );\n  }\n\n}\n\nHTMLDirective.define( RefDirective )\n\nexport const ref = <T extends Node>( options:IElementRef<T> ) => RefDirective.use<T>( options );","// import { ViewTemplate, HTMLBindingDirective, ExecutionContext } from '@microsoft/fast-element';\nimport { State , createState } from '@lithium-framework/state';\nimport { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class StateBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StateDirective<T = any> extends HTMLBindingDirective {\n\n    _state:State<T> = null;\n    get state(){ return this._state.mutator[0] }\n    set state( value:T ){ this._state.mutator[1](value) }\n\n    _callback:( newValue:T ) => ViewTemplate = null;\n\n    constructor( state: State<T> , callback:( newValue:T ) => ViewTemplate ) {\n        super( new StateBindig( (x) => null ) );\n        this._state = state;\n        this._callback = callback;\n    }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n    let view:HTMLView = null;\n\n    return {\n        bind : (source:HTMLView) => {\n\n            let target = source.targets[targetNodeId];\n\n            if(this._callback){\n\n                this._state.subscribe(() => {\n                    view.dispose();\n                    view = this._callback( this.state ).render( source , target.parentElement );\n                });\n\n                view = this._callback( this.state ).render( source , target.parentElement );\n\n            }\n\n            else{\n\n                this._state.subscribe(() => {\n                    if(\"textContent\" in target){\n                        target.textContent = `${this.state}`;\n                    }\n                });\n\n                if(\"textContent\" in target){\n                    target.textContent = `${this.state}`;\n                }\n\n            }\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T = any>( state , callback ){\n    return new StateDirective<T>( state , callback )\n  }\n\n}\n\nHTMLDirective.define( StateDirective )\n\nexport const useState = <T>( state: State<T> , callback?:( newValue:T ) => ViewTemplate ) => StateDirective.use<T>( state , callback );","import { HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\nimport { Properties } from '../utils/css-object';\n\nexport class StyleBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StyleDirective extends HTMLBindingDirective {\n\n  css:Properties = null;\n\n  constructor( css:Properties ) {\n      super( new StyleBindig( (x) => null ) );\n      Object.assign( this , { css } );\n\n  }\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n  let view:HTMLView = null;\n\n  return {\n      bind : (source:HTMLView) => {\n\n        let target = source.targets[targetNodeId];\n        if(target instanceof HTMLElement)Object.assign( target.style , this.css );\n\n      },\n      unbind : () => {\n          // Nettoyage si nécessaire\n      }\n  };\n\n}\n\nstatic use( css:Properties ){\n  return new StyleDirective( css )\n}\n\n}\n\nHTMLDirective.define( StyleDirective );\n\nexport const style = ( css:Properties ) => StyleDirective.use( css );","import { ViewTemplate , html , HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class UntilBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class UntilDirective extends HTMLBindingDirective {\n\n  fn:Promise<ViewTemplate> = null;\n  template:ViewTemplate = null;\n\n  constructor( fn:Promise<ViewTemplate> , template:ViewTemplate ) {\n    super( new UntilBindig( (x) => null ) );\n    Object.assign( this , { fn , template } );\n}\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n\n  return {\n    bind : (source:HTMLView) => {\n\n      let target = source.targets[targetNodeId];\n      let loading = this.template.render( source , target instanceof HTMLElement ? target : target.parentElement );\n\n      this.fn\n      .then(( result ) => {\n        loading.dispose()\n        result.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n      .catch(( error ) => {\n        console.error(error);\n        loading.dispose();\n        html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n\n    },\n    unbind : () => {\n        // Nettoyage si nécessaire\n    }\n};\n\n}\n\nstatic use( fn:Promise<ViewTemplate> , template: ViewTemplate ){\n  return new UntilDirective( fn , template);\n}\n\n}\n\nHTMLDirective.define( UntilDirective );\n\nexport const until = ( fn:Promise<ViewTemplate> , template:ViewTemplate ) => UntilDirective.use( fn , template );","export {\n  // _cssObject,\n  // Properties,\n  // createCSS\n} from './css-object';\n\nexport {\n  createObservableObject,\n} from './observable-object';\n\nexport {\n  ObservableObject,\n  Observable\n} from './observable-object/models';\n\nexport { \n  State,\n  createState\n} from '@lithium-framework/state';\n\nexport { \n  createStorage,\n  // Storage, \n  // StorageKeys, \n  // StorageValues, \n  // StateValidator\n} from '@lithium-framework/context';\n\nexport {\n  // ComponentId,\n  // Segment,\n  // ParentSegementId,\n  // CollectionId,\n  // HUID,\n  // HierarchicalUUIDOptions,\n  uuid\n} from '@lithium-framework/huid';\n\n// export{\n//   Observable,\n//   volatile,\n  // State,\n  // createState,\n  // createStorage,\n  // Storage, \n  // StorageKeys, \n  // StorageValues, \n  // StateValidator,\n  // ComponentId,\n  // Segment,\n  // ParentSegementId,\n  // CollectionId,\n  // HUID,\n  // HierarchicalUUIDOptions,\n  // uuid\n// }","import { ObservableObject } from './models';\n\nexport function createObservableObject< Key extends string , Value extends any >( initialObject:Record< Key , Value > ){\n  return ObservableObject.init< Key , Value >( initialObject );\n}","export { \n  customElement , \n  css,\n  // html,\n  ViewTemplate,\n  HTMLView,\n  volatile,\n} from \"@microsoft/fast-element\";\n\nimport {\n  html as _html,\n  HTMLTemplateTag\n} from \"@microsoft/fast-element\"\n\nexport const html:HTMLTemplateTag = _html;\n\nexport { \n  WebComponent \n} from './model';","import { FASTElement } from \"@microsoft/fast-element\";\nimport { ObservableObject } from '../utils/observable-object/models';\n\n/* The WebComponent class extends FASTElement and provides state management functionality using\nObservableObject. */\nexport class WebComponent extends FASTElement{\n\n  /* The `static states = {};` line is declaring a static property named `states` on the `WebComponent`\n  class and initializing it as an empty object `{}`. This property is intended to hold the initial\n  state values for the component. By defining it as a static property, it is shared among all\n  instances of the `WebComponent` class rather than being specific to individual instances. This\n  allows all instances of the class to access and modify the same set of state values. */\n  static states = {};\n\n  /* The line ` = ObservableObject.init( this.constructor[\"states\"] );` is initializing an\n  instance property named `` on the `WebComponent` class. This property is being set to the\n  result of calling the `init` method of the `ObservableObject` class, passing in the initial state\n  values defined in the `states` static property of the `WebComponent` class\n  (`this.constructor[\"states\"]`). */\n  $states = ObservableObject.init( this.constructor[\"states\"] );\n\n  constructor(){\n    super();\n\n    Object.keys(this.constructor[\"states\"]).forEach( key => {\n      // delete this[key];\n      Object.defineProperty( this , key , {\n        get(){\n          return this.$states[key];\n        },\n        set( value ){\n          this.$states[key] = value;\n        }\n      } )\n      \n    });\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n  }\n\n  static define = FASTElement.define\n  \n}"],"names":["ViewTemplate","ObservableObject","state","_state_keys","_classPrivateFieldLooseKey","ViewExecutionContext","Record","states","$states","constructor","data","T","init","Object","defineProperty","writable","value","createState","key","States","setter","newValue","_classPrivateFieldLooseBase","includes","useState","get","JSON","parse","set","push","stringify","fromEntries","Map","Array","from","console","log","createConsumable","assign","ViewContext","render","template","container","HTMLElement","document","body","context","Observable","initialObject","observabe","createProxy","$data","keys","forEach","Proxy","store","propKey","result","undefined","error","DecoratorAttributeConfiguration","attr","attrState","options","target","propertyKey","observable","constructible","enumerable","configurable","when","repeat","children","elements","slotted","HTMLDirective","HTMLBindingDirective","HTMLView","html","Binding","Subscriber","BindingDirective","ExpressionObserver","AsyncAppendBindig","createObserver","subscriber","directive","bind","controller","AsyncAppendDirective","fn","Promise","callback","x","createBehavior","targetNodeId","source","targets","then","parentElement","catch","unbind","use","define","asyncAppend","StatelessAttachedAttributeDirective","IElementRef","Node","createRef","RefDirective","lastChild","ref","State","StateBindig","StateDirective","_state","mutator","_callback","view","subscribe","dispose","textContent","Properties","StyleBindig","StyleDirective","css","style","UntilBindig","UntilDirective","loading","until","createObservableObject","createStorage","uuid","Key","Value","customElement","volatile","_html","HTMLTemplateTag","WebComponent","FASTElement","connectedCallback"],"version":3,"file":"index.js.map","sourceRoot":"../"}