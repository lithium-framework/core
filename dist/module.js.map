<<<<<<< Updated upstream
{"mappings":"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","sources":["src/index.ts","src/dom/index.ts","src/utils/observable-object/index.ts","src/utils/observable-object/models.ts","src/decorators/index.ts","src/decorators/attributeState.ts","src/decorators/state.ts","src/dom/application/index.ts","src/webComponent/index.ts","src/webComponent/model.ts","src/directives/index.ts","src/directives/assyncAppend.ts","src/directives/ref.ts","src/directives/state.ts","src/directives/style.ts","src/directives/until.ts","src/dom/router/index.ts","src/utils/index.ts","src/utils/css-object/index.ts","src/utils/css-object/models.ts"],"sourcesContent":["import * as DOM from './dom/index.js';\nimport * as Decorators from './decorators/index.js';\nimport * as Directives from './directives/index.js';\nimport * as Utils from './utils/index.js';\nimport * as Component from './webComponent/index.js'\n\nexport * from './dom/index.js';\nexport * from './decorators/index.js';\nexport * from './directives/index.js';\n// export * from './dom/application/index.js';\nexport * from './utils/index.js';\nexport * from './webComponent/index.js';\n\n// namespace Lithium{\n//   export const DOM = require('./dom/index.js');\n//   export const Decorators = require('./decorators/index.js');\n//   export const Directives = require('./directives/index.js');\n//   export const Utils = require('./utils/index.js');\n//   export const Component = require('./webComponent/index.js');\n// };\n\n// export default Lithium;\n\n// (() => {\n\n//   if(globalThis.window){\n\n//     window['lithium'] = {\n\n//     };\n\n//   }\n  \n// })()","import { ViewTemplate } from '@microsoft/fast-element';\nimport { ObservableObject } from '../utils/observable-object/index.js';\nimport { state } from '../decorators/index.js';\nimport './application/index.js';\nimport './router/index.js';\n\nexport class ComponentExecutionContext< T = any , States extends Record<string , any> = Record<string , any> >{\n\n  $states = ObservableObject.init< any , any >({});\n  get states(){ return this.$states }\n  #_state_keys:string[] = [];\n  \n  createState = <T>( key:keyof States , value:T ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    if(this.#_state_keys.includes(key as string))return this.useState( key );\n\n    Object.defineProperty( this , key , {\n      get(){\n        return JSON.parse(this.states[key]);\n      },\n      set( value ){\n        \n        if(!this.#_state_keys.includes(key)){\n\n          this.#_state_keys.push( key );\n\n          this.$states = ObservableObject.init({\n            [key] :  JSON.stringify(value),\n            ...Object.fromEntries(\n              new Map(\n                Array.from( this.#_state_keys , ( key ) => {\n                  return [ key , this.$states[`${key}`] ]\n                } )\n              )\n            )\n          });\n\n        }\n\n        this.$states[key] = JSON.stringify(value);\n\n      }\n    });\n\n    this[key as string] = value;\n    return this.useState( key );\n\n  }\n\n  useState = <T>( key:keyof States ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    return [ this[key as string] , ( newValue ) => {\n      console.log({ newValue })\n      this[key as string] = newValue;\n    } ];\n\n  }\n\n  createConsumable = <T = any>( key:string , value:T ) => {\n    state( this , key , value , false );\n  }\n\n  constructor( data?:T ){\n      Object.assign( this , data );\n  }\n\n  static init< T extends Record<string , any> = {} >( data?:T ):ComponentContext<T>{\n      return new ComponentExecutionContext( data ) as any as ComponentContext<T>;\n  }\n\n}\n\nexport type ComponentContext< T = Record<string , any> , States = Record<string , any> > = ComponentExecutionContext<T , States> & T;\n\nexport function render< T extends Record<string , any> = {} , Storage extends Record<string , any> = Record<string , any> >(template: ViewTemplate<ComponentContext<any, Record<string, any>>, any>, container: HTMLElement = document.body , data = {} ) {\n\n  let context = ComponentExecutionContext.init(data);\n  return template.render( context , container);\n\n}","import { ObservableObject , Observable } from './models.js';\n\nexport function createObservableObject< Key extends string , Value extends any >( initialObject:Record< Key , Value > ){\n  return ObservableObject.init< Key , Value >( initialObject );\n}\n\nexport { ObservableObject , Observable };","import { Observable } from \"@microsoft/fast-element\";\n\nexport class ObservableObject< key extends string , value extends any = any > extends Object{\n\n  static init< key extends string , value extends any >( initialObject:Record<key , value> ){\n    let observabe = new ObservableObject< key , value >( initialObject );\n    return observabe.createProxy();\n  }\n\n  $data:Record<string , value> = {};\n\n  constructor( initialObject:Record<key , value> ){\n    super();\n\n    Object.keys( initialObject ).forEach(( key:key ) => {\n      this.set( key , initialObject[key] );\n    })\n\n  };\n\n  set = <T extends value = any>( key:key , value:T ) => {   \n\n    this.$data[`_${key}`] = value as any;\n    Observable.defineProperty( this.$data, key);\n    return this.$data[key];\n\n  }\n\n  createProxy(){\n\n    return new Proxy( this.$data , {\n      get( store , propKey:string ){\n\n        let result = undefined;\n\n        try{\n          result = store[propKey];\n        }\n        catch(error){\n          console.error(error);\n        }\n        finally{\n          return result;\n        }\n\n      },\n      set( store , propKey: string, value: any ){\n\n        if(store[propKey]){\n          store[propKey] = value;\n        }\n        else {\n          store[ `_${propKey}` ] = value;\n          Observable.defineProperty( store, propKey);\n        }\n\n        return true;\n  \n      }\n    })\n\n  }\n\n}\n\nexport { Observable };","export * from './attributeState.js';\nexport * from './state.js';\n\nimport { attr , observable } from '@microsoft/fast-element';\n\nexport {\n  attr,\n  observable,\n};","import { DecoratorAttributeConfiguration, attr } from \"@microsoft/fast-element\";\nimport { state } from './state.js';\n\n/**\n * @AttributeState decorator\n * A decorator to define a property as both an attribute and a state on a WebComponent.\n * This combines the behavior of @attr and @State decorators.\n * \n * @param {DecoratorAttributeConfiguration} options - Options to configure the attribute.\n * @returns {Function} - The decorator function.\n * \n * @example\n * ```typescript\n * // Define an editable title component using the AttributeState decorator\n * \n * customElement({\n *     name: 'editable-title',\n *     template : html`...`\n * })\n * class EditableTitle extends WebComponent {\n *     AttributeState() level: number = 2;\n *     AttributeState() editable: string = \"false\";\n *     State value: string = \"Hello World\";\n * \n *     handleInput(event) {\n *         this.value = event.target.innerText;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();\n *     }\n * }\n * ```\n */\nexport function attrState( options:DecoratorAttributeConfiguration = {} ){\n\n  return ( target, propertyKey: string ) => {\n    attr( options )( target , propertyKey );\n    state( target , propertyKey );\n  }\n\n}","import { observable } from \"@microsoft/fast-element\";\n\n/**\n * @State decorator\n * A decorator to define a state property on a WebComponent.\n * This state property is observable, and its changes are detected and handled.\n * \n * @param {Object} target - The prototype of the class where the state property is defined.\n * @param {string} propertyKey - The name of the property to be defined as a state.\n * \n * @example\n * ```typescript\n * /// Define a counter component using the State decorator\n\n * customElement({\n *     name: 'counter-element',\n *     template: html`...`\n * })\n * class CounterElement extends WebComponent {\n *     State count: number = 0;\n * \n *     increment() {\n *         this.count += 1;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();s\n *     }\n * }\n * ```\n */\nexport function state(target, propertyKey: string , value:any = null , constructible = false){\n\n  if(constructible)target.constructor.states = target.constructor.states || {};\n\n  Object.defineProperty( target , propertyKey , {\n    get(){\n      return target.$states[propertyKey];\n    },\n    set(newValue){\n      target.$states[propertyKey] = newValue;\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  } );\n\n  observable(target, propertyKey);\n\n  if(value)target[propertyKey] = value;\n\n}","import { customElement , html , WebComponent } from '../../webComponent/index.js';\nimport { Router , RouteConfig } from '../router/index.js';\n\n/* The MainApplication class extends Router and specifies a type property for routing configuration. */\n@customElement({\n  name : 'main-application',\n  template : html`<slot></slot>`\n})\nclass MainApplication extends Router{\n\n  type : 'pathname-router' | 'hash-router' = 'pathname-router';\n\n  constructor( config:RouteConfig[] ){\n    super( config );\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n}\n\nexport declare module global{\n  interface HTMLElementTagNameMap{\n    'main-application' : MainApplication;\n  }\n}\n\n\nexport { \n  MainApplication \n};","export { \n  customElement , \n  css, \n  html, \n  Observable, \n  ViewTemplate,\n  HTMLView,\n  SyntheticView, \n  volatile \n} from \"@microsoft/fast-element\";\n\nexport { \n  WebComponent \n} from './model.js';\n\nexport { \n  attr,\n  observable,\n  state,\n  attrState,\n} from '../decorators/index.js';\n\nexport {\n  when,\n  repeat,\n  ref,\n  children,\n  slotted\n} from '../directives/index.js';","import { FASTElement } from \"@microsoft/fast-element\";\nimport { ObservableObject } from '../utils/observable-object/index.js';\n\n/* The WebComponent class extends FASTElement and provides state management functionality using\nObservableObject. */\nexport class WebComponent extends FASTElement{\n\n  /* The `static states = {};` line is declaring a static property named `states` on the `WebComponent`\n  class and initializing it as an empty object `{}`. This property is intended to hold the initial\n  state values for the component. By defining it as a static property, it is shared among all\n  instances of the `WebComponent` class rather than being specific to individual instances. This\n  allows all instances of the class to access and modify the same set of state values. */\n  static states = {};\n\n  /* The line ` = ObservableObject.init( this.constructor[\"states\"] );` is initializing an\n  instance property named `` on the `WebComponent` class. This property is being set to the\n  result of calling the `init` method of the `ObservableObject` class, passing in the initial state\n  values defined in the `states` static property of the `WebComponent` class\n  (`this.constructor[\"states\"]`). */\n  $states = ObservableObject.init( this.constructor[\"states\"] );\n\n  constructor(){\n    super();\n\n    Object.keys(this.constructor[\"states\"]).forEach( key => {\n      // delete this[key];\n      Object.defineProperty( this , key , {\n        get(){\n          return this.$states[key];\n        },\n        set( value ){\n          this.$states[key] = value;\n        }\n      } )\n      \n    });\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n  }\n\n  static define = FASTElement.define\n  \n}","import {\n  when,\n  repeat,\n  // ref,\n  children,\n  elements,\n  slotted,\n} from '@microsoft/fast-element';\n\nexport {\n  when,\n  repeat,\n  children,\n  elements,\n  slotted\n}\n\nexport * from './assyncAppend.js';\nexport * from './ref.js';\nexport * from './state.js';\nexport * from './style.js';\nexport * from './until.js';","import { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , html , Binding } from '@microsoft/fast-element';\nimport type { Subscriber , BindingDirective, ExpressionObserver } from '@microsoft/fast-element';\n\nexport class AsyncAppendBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class AsyncAppendDirective<T = any> extends HTMLBindingDirective {\n\n  fn:Promise<T> = null;\n  callback:( result:T ) => ViewTemplate = null;\n\n  constructor( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) {\n    super( new AsyncAppendBindig( (x) => null ) );\n    Object.assign( this , { fn , callback } );\n  }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n\n    return {\n        bind : (source:HTMLView ) => {\n\n          let target = source.targets[targetNodeId];\n\n          this.fn\n          .then(( result ) => {\n            this.callback( result ).render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n          .catch(( error ) => {\n            console.error(error)\n            html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ){\n    return new AsyncAppendDirective( fn , callback);\n  }\n\n}\n\nHTMLDirective.define( AsyncAppendDirective );\n\nexport { Subscriber }\n\nexport const asyncAppend = <T = any>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) => AsyncAppendDirective.use<T>( fn , callback );","import { HTMLDirective, HTMLView, Binding, BindingDirective, ExpressionObserver, Subscriber, StatelessAttachedAttributeDirective } from '@microsoft/fast-element';\n\nexport interface IElementRef< T extends Node >{\n  value : T | null;\n}\n\nexport function createRef< T extends Node >():IElementRef<T>{\n  return {\n    value : null\n  }\n}\n\nexport class RefDirective<T extends Node> extends StatelessAttachedAttributeDirective<IElementRef<T>> {\n\n  options:IElementRef<T> = null;\n\n  constructor( options:IElementRef<T> ) {\n    super( options );\n    Object.assign( this , { options } )\n  }\n\n  bind(controller: HTMLView): void {\n\n    let { lastChild:target } = controller;\n\n    this.options.value = target as any;\n\n  }\n\n  static use<T extends Node>( options:IElementRef<T> ){\n    return new RefDirective<T>( options );\n  }\n\n}\n\nHTMLDirective.define( RefDirective )\n\nexport const ref = <T extends Node>( options:IElementRef<T> ) => RefDirective.use<T>( options );","// import { ViewTemplate, HTMLBindingDirective, ExecutionContext } from '@microsoft/fast-element';\nimport { State , createState } from '@lithium-framework/state';\nimport { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class StateBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StateDirective<T = any> extends HTMLBindingDirective {\n\n    _state:State<T> = null;\n    get state(){ return this._state.mutator[0] }\n    set state( value:T ){ this._state.mutator[1](value) }\n\n    _callback:( newValue:T ) => ViewTemplate = null;\n\n    constructor( state: State<T> , callback:( newValue:T ) => ViewTemplate ) {\n        super( new StateBindig( (x) => null ) );\n        this._state = state;\n        this._callback = callback;\n    }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n    let view:HTMLView = null;\n\n    return {\n        bind : (source:HTMLView) => {\n\n            let target = source.targets[targetNodeId];\n\n            if(this._callback){\n\n                this._state.subscribe(() => {\n                    view.dispose();\n                    view = this._callback( this.state ).render( source , target.parentElement );\n                });\n\n                view = this._callback( this.state ).render( source , target.parentElement );\n\n            }\n\n            else{\n\n                this._state.subscribe(() => {\n                    if(\"textContent\" in target){\n                        target.textContent = `${this.state}`;\n                    }\n                });\n\n                if(\"textContent\" in target){\n                    target.textContent = `${this.state}`;\n                }\n\n            }\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T = any>( state , callback ){\n    return new StateDirective<T>( state , callback )\n  }\n\n}\n\nHTMLDirective.define( StateDirective )\n\nexport const useState = <T>( state: State<T> , callback?:( newValue:T ) => ViewTemplate ) => StateDirective.use<T>( state , callback );","import { HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\nimport { CSSProperties } from '../utils/css-object';\n\nexport class StyleBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StyleDirective extends HTMLBindingDirective {\n\n  css:CSSProperties = null;\n\n  constructor( css:CSSProperties ) {\n      super( new StyleBindig( (x) => null ) );\n      Object.assign( this , { css } );\n\n  }\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n  let view:HTMLView = null;\n\n  return {\n      bind : (source:HTMLView) => {\n\n        let target = source.targets[targetNodeId];\n        if(target instanceof HTMLElement)Object.assign( target.style , this.css );\n\n      },\n      unbind : () => {\n          // Nettoyage si nécessaire\n      }\n  };\n\n}\n\nstatic use( css:CSSProperties ){\n  return new StyleDirective( css )\n}\n\n}\n\nHTMLDirective.define( StyleDirective );\n\nexport const style = ( css:CSSProperties ) => StyleDirective.use( css );","import { ViewTemplate , html , HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class UntilBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class UntilDirective extends HTMLBindingDirective {\n\n  fn:Promise<ViewTemplate> = null;\n  template:ViewTemplate = null;\n\n  constructor( fn:Promise<ViewTemplate> , template:ViewTemplate ) {\n    super( new UntilBindig( (x) => null ) );\n    Object.assign( this , { fn , template } );\n}\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n\n  return {\n    bind : (source:HTMLView) => {\n\n      let target = source.targets[targetNodeId];\n      let loading = this.template.render( source , target instanceof HTMLElement ? target : target.parentElement );\n\n      this.fn\n      .then(( result ) => {\n        loading.dispose()\n        result.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n      .catch(( error ) => {\n        console.error(error);\n        loading.dispose();\n        html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n\n    },\n    unbind : () => {\n        // Nettoyage si nécessaire\n    }\n};\n\n}\n\nstatic use( fn:Promise<ViewTemplate> , template: ViewTemplate ){\n  return new UntilDirective( fn , template);\n}\n\n}\n\nHTMLDirective.define( UntilDirective );\n\nexport const until = ( fn:Promise<ViewTemplate> , template:ViewTemplate ) => UntilDirective.use( fn , template );","import { render } from '../../dom/index.js';\nimport { customElement , WebComponent , ViewTemplate , html } from '../../webComponent/index.js';\nimport RouteRecognizer, { Params } from 'route-recognizer';\n\nif ('URLPattern' in globalThis == false) { \n  import(\"urlpattern-polyfill\").then(({ URLPattern }) => { window[\"URLPattern\"] = URLPattern; })\n}\n\n/* The `BaseRouteConfig` interface is defining a structure for the configuration options that can be\nprovided for a route in the routing system. Here's a breakdown of each property within the\n`BaseRouteConfig` interface: */\ninterface BaseRouteConfig {\n  name?: string | undefined;\n  render?: ViewTemplate<{ [key: string]: string | undefined }>;\n  enter?: (params: {\n      [key: string]: string | undefined;\n  }) => Promise<boolean> | boolean;\n}\n\n/* The `interface PathRouteConfig` is extending the `BaseRouteConfig` interface and adding a new\nproperty `path` of type string to it. This means that any object that implements the\n`PathRouteConfig` interface must have all the properties defined in `BaseRouteConfig` interface\n(like `name`, `render`, `enter`) along with the additional `path` property of type string. This\nallows for more specific route configurations that include a path string for routing purposes. */\ninterface PathRouteConfig extends BaseRouteConfig {\n  path: string;\n}\n\n/* The `interface URLPatternRouteConfig` is extending the `BaseRouteConfig` interface by adding a new\nproperty `pattern` of type `URLPattern` to it. This means that any object that implements the\n`URLPatternRouteConfig` interface must have all the properties defined in the `BaseRouteConfig`\ninterface (such as `name`, `render`, `enter`) along with the additional `pattern` property of type\n`URLPattern`. */\ninterface URLPatternRouteConfig extends BaseRouteConfig {\n  pattern: URLPattern;\n}\n\ntype RouteConfig = PathRouteConfig | URLPatternRouteConfig;\n\n/* The `Routes` class extends `RouteRecognizer` and constructs routes based on the provided\n`routeConfig` array. */\nclass Routes extends RouteRecognizer{\n\n  routeConfig;\n\n  constructor( router:Router , routeConfig:RouteConfig[] ){\n    super();\n\n    routeConfig.forEach(( route:PathRouteConfig ) => {\n\n      this.add([\n        { \n          path : route.path , \n          handler : ( params ) => {\n            render( route.render , router , params )\n          },\n        }\n      ] , route.name ? { as : route.name } : null)\n\n    })\n\n  }\n\n}\n\n/* The `Router` class is a custom web component that handles routing based on either pathname or hash,\nwith configurable routes and templates for header and footer. */\n@customElement({\n  name : \"lithium-router\",\n  template : html`<slot></slot>`\n})\nclass Router extends WebComponent{\n\n  /* The line `type : 'pathname-router' | 'hash-router' = 'hash-router';` is defining a property `type`\n  in the `Router` class with a type of string literal union `'pathname-router' | 'hash-router'`.\n  This means that the `type` property can only have one of two specific string values:\n  `'pathname-router'` or `'hash-router'`. */\n  type : 'pathname-router' | 'hash-router' = 'hash-router';\n\n  /* `private _config:RouteConfig[] = [];` is defining a private property `_config` in the `Router`\n  class with an initial value of an empty array of `RouteConfig` objects. This property is used to\n  store the route configuration provided to the `Router` instance. */\n  private _config:RouteConfig[] = [];\n\n  /* The line `private _routes = new Routes(this, this._config || []);` is initializing a private\n  property `_routes` in the `Router` class with a new instance of the `Routes` class. The `Routes`\n  class is responsible for constructing routes based on the provided `routeConfig` array. */\n  private _routes = new Routes(this, this._config || []);\n\n  header:ViewTemplate<Router>;\n  footer:ViewTemplate<Router>;\n\n  get routes(){\n    return new Proxy( this._routes , {\n      get(){ return undefined; },\n      set(){ return false; }\n    } )\n  }\n\n  get config(){\n    return this._config;\n  }\n\n  set config( newConfig:RouteConfig[] ){\n    this._config = newConfig;\n    this._routes = new Routes(this, newConfig || []);\n  }\n\n  constructor( config:RouteConfig[] ){\n    super();\n    this.config = config;\n  }\n\n  outlet(){\n\n    this.clear();\n    let url = this.type == 'pathname-router' ? this.pathname : this.hash;\n    let result = this._routes.recognize( url );\n\n    Array.from( { length : result.length } , ( i , iterator ) => {\n\n      console.log({ i , iterator })\n\n      let route = result[iterator];\n      let handler = route.handler as ( params:Params ) => void;\n      handler( route.params );\n\n    });\n\n  }\n\n  onHashChange( event:HashChangeEvent ){\n    this.outlet();\n  }\n\n  normalizeHashLocation( hash:string ){\n    return hash.replace('#' , '');\n  }\n\n  get pathname(){\n    return window.location.pathname;\n  }\n\n  get hash(){\n    return this.normalizeHashLocation( window.location.hash );\n  }\n\n  clear(){\n    this.childNodes.forEach((element) => {\n      element.remove();\n    })\n  }\n\n  connectedCallback(): void {\n\n    super.connectedCallback();\n\n    if(this.type == 'hash-router'){\n      window.addEventListener( 'hashchange' , this.onHashChange.bind(this) );\n    }\n\n    this.outlet();\n\n    if(!window.location.hash)window.location.hash = '/';\n\n  }\n\n};\n\nexport declare module global{\n  interface HTMLElementTagNameMap{\n    'lithium-router' : Router;\n  }\n}\n\nexport { \n  BaseRouteConfig,\n  PathRouteConfig,\n  URLPatternRouteConfig,\n  RouteConfig,\n  Routes,\n  Router\n}","import {\n  Observable,\n  volatile\n} from '@microsoft/fast-element';\n\nexport {\n  _cssObject,\n  // Properties,\n  createCSS\n} from './css-object/index.js';\n\nexport {\n  createObservableObject,\n  ObservableObject\n} from './observable-object/index.js';\n\nimport { \n  State,\n  createState\n} from '@lithium-framework/state';\n\nimport { \n  createStorage,\n  Storage, \n  StorageKeys, \n  StorageValues, \n  StateValidator\n} from '@lithium-framework/context';\n\nimport { \n  ComponentId,\n  Segment,\n  ParentSegementId,\n  CollectionId,\n  HUID,\n  HierarchicalUUIDOptions,\n  uuid\n} from '@lithium-framework/huid';\n\nexport{\n  Observable,\n  volatile,\n  State,\n  createState,\n  createStorage,\n  Storage, \n  StorageKeys, \n  StorageValues, \n  StateValidator,\n  ComponentId,\n  Segment,\n  ParentSegementId,\n  CollectionId,\n  HUID,\n  HierarchicalUUIDOptions,\n  uuid\n}\n\nexport { }","import { \n  _cssObject \n} from './models.js';\n\nimport type {\n  CSSProperties,\n} from './types.js'\n\nexport{\n  _cssObject,\n  CSSProperties\n}\n\nexport function createCSS( css:Partial<CSSProperties> ){\n  return _cssObject.init( css );\n}","\nimport { uuid , FixedLengthString } from '@lithium-framework/huid';\nimport decamelize from 'decamelize';\n\nimport { CSSProperties } from './types.js'\n\n/** La classe `_cssObject` fournit des méthodes statiques pour travailler avec des objets CSS dans\nTypeScript, notamment l'encodage, le décodage, l'aplatissement, la normalisation et la compilation\nd'objets CSS. */\nexport class _cssObject{\n\n  private _css : Partial<CSSProperties> = {};\n\n  static init( css:Partial<CSSProperties> ){\n    return new _cssObject( css );\n  }\n\n  constructor( css:Partial<CSSProperties> ){\n    Object.assign( this._css , css );\n  }\n\n  // Transformation du cssObject en String\n  _toCssString(){\n    return `${Array.from( Object.keys( this._css ) , ( key ) => {\n      return [ decamelize( key  , {separator: '-'} ) , this._css[key] ].join(':');\n    } ).join(';')};`;\n  }\n\n  [Symbol.toPrimitive](){\n    return this._toCssString();\n  }\n\n  /**\n   * La fonction génère un UUID aléatoire en codant trois groupes de quatre zéros et en les concaténant\n   * avec des traits de soulignement.\n   * @returns une chaîne composée de trois parties séparées par des traits de soulignement. Chaque\n   * partie est un UUID (Universally Unique Identifier) codé sous la forme d'une chaîne de longueur\n   * fixe de 4 caractères.\n   */\n  static randomUUID(){\n    return `${uuid.encode( '0000' as FixedLengthString<4> )}_${uuid.encode( '0000' as FixedLengthString<4> )}${uuid.encode( '0000' as FixedLengthString<4> )}`;\n  }\n\n}"],"names":["DOM","Decorators","Directives","Utils","Component","ViewTemplate","ObservableObject","state","_state_keys","_classPrivateFieldLooseKey","ComponentExecutionContext","Record","states","$states","constructor","data","T","init","Object","defineProperty","writable","value","createState","key","States","setter","newValue","_classPrivateFieldLooseBase","includes","useState","get","JSON","parse","set","push","stringify","fromEntries","Map","Array","from","console","log","createConsumable","assign","ComponentContext","render","template","container","HTMLElement","document","body","context","Observable","createObservableObject","initialObject","Key","Value","observabe","createProxy","$data","keys","forEach","Proxy","store","propKey","result","undefined","error","attr","observable","DecoratorAttributeConfiguration","attrState","options","target","propertyKey","constructible","enumerable","configurable","customElement","html","WebComponent","Router","RouteConfig","MainApplication","_dec","name","_class","config","type","connectedCallback","global","HTMLElementTagNameMap","css","HTMLView","SyntheticView","volatile","when","repeat","ref","children","slotted","FASTElement","define","elements","HTMLDirective","HTMLBindingDirective","Binding","Subscriber","BindingDirective","ExpressionObserver","AsyncAppendBindig","createObserver","subscriber","directive","bind","controller","AsyncAppendDirective","fn","Promise","callback","x","createBehavior","targetNodeId","source","targets","then","parentElement","catch","unbind","use","asyncAppend","StatelessAttachedAttributeDirective","IElementRef","Node","createRef","RefDirective","lastChild","State","StateBindig","StateDirective","_state","mutator","_callback","view","subscribe","dispose","textContent","CSSProperties","StyleBindig","StyleDirective","style","UntilBindig","UntilDirective","loading","until","RouteRecognizer","Params","globalThis","URLPattern","window","BaseRouteConfig","enter","params","PathRouteConfig","path","URLPatternRouteConfig","pattern","Routes","router","routeConfig","route","add","handler","as","routes","_routes","_config","newConfig","header","footer","outlet","clear","url","pathname","hash","recognize","length","i","iterator","onHashChange","event","HashChangeEvent","normalizeHashLocation","replace","location","childNodes","element","remove","addEventListener","_cssObject","createCSS","createStorage","Storage","StorageKeys","StorageValues","StateValidator","ComponentId","Segment","ParentSegementId","CollectionId","HUID","HierarchicalUUIDOptions","uuid","Partial","FixedLengthString","decamelize","_css","_toCssString","separator","join","Symbol","toPrimitive","randomUUID","encode"],"version":3,"file":"module.js.map","sourceRoot":"../"}
=======
{"mappings":"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","sources":["src/index.ts","src/dom/index.ts","src/utils/observable-object/index.ts","src/utils/observable-object/models.ts","src/decorators/index.ts","src/decorators/attributeState.ts","src/decorators/state.ts","src/dom/application/index.ts","src/webComponent/index.ts","src/webComponent/model.ts","src/directives/index.ts","src/directives/assyncAppend.ts","src/directives/ref.ts","src/directives/state.ts","src/directives/style.ts","src/directives/until.ts","src/dom/router/index.ts","src/utils/index.ts","src/utils/css-object/index.ts","src/utils/css-object/models.ts"],"sourcesContent":["import * as DOM from './dom/index.js';\nimport * as Decorators from './decorators/index.js';\nimport * as Directives from './directives/index.js';\nimport * as Utils from './utils/index.js';\nimport * as Component from './webComponent/index.js'\n\nexport * from './dom/index.js';\nexport * from './decorators/index.js';\nexport * from './directives/index.js';\n// export * from './dom/application/index.js';\nexport * from './utils/index.js';\nexport * from './webComponent/index.js';\n\n// namespace Lithium{\n//   export const DOM = require('./dom/index.js');\n//   export const Decorators = require('./decorators/index.js');\n//   export const Directives = require('./directives/index.js');\n//   export const Utils = require('./utils/index.js');\n//   export const Component = require('./webComponent/index.js');\n// };\n\n// export default Lithium;\n\n// (() => {\n\n//   if(globalThis.window){\n\n//     window['lithium'] = {\n\n//     };\n\n//   }\n  \n// })()","import { ViewTemplate } from '@microsoft/fast-element';\nimport { ObservableObject } from '../utils/observable-object/index.js';\nimport { state } from '../decorators/index.js';\nimport './application/index.js';\nimport './router/index.js';\n\nexport class ComponentExecutionContext< T = any , States extends Record<string , any> = Record<string , any> >{\n\n  $states = ObservableObject.init< any , any >({});\n  get states(){ return this.$states }\n  #_state_keys:string[] = [];\n  \n  createState = <T>( key:keyof States , value:T ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    if(this.#_state_keys.includes(key as string))return this.useState( key );\n\n    Object.defineProperty( this , key , {\n      get(){\n        return JSON.parse(this.states[key]);\n      },\n      set( value ){\n        \n        if(!this.#_state_keys.includes(key)){\n\n          this.#_state_keys.push( key );\n\n          this.$states = ObservableObject.init({\n            [key] :  JSON.stringify(value),\n            ...Object.fromEntries(\n              new Map(\n                Array.from( this.#_state_keys , ( key ) => {\n                  return [ key , this.$states[`${key}`] ]\n                } )\n              )\n            )\n          });\n\n        }\n\n        this.$states[key] = JSON.stringify(value);\n\n      }\n    });\n\n    this[key as string] = value;\n    return this.useState( key );\n\n  }\n\n  useState = <T>( key:keyof States ):[ state:T , setter:( newValue:T ) => void ] => {\n\n    return [ this[key as string] , ( newValue ) => {\n      console.log({ newValue })\n      this[key as string] = newValue;\n    } ];\n\n  }\n\n  createConsumable = <T = any>( key:string , value:T ) => {\n    state( this , key , value , false );\n  }\n\n  constructor( data?:T ){\n      Object.assign( this , data );\n  }\n\n  static init< T extends Record<string , any> = {} >( data?:T ):ComponentContext<T>{\n      return new ComponentExecutionContext( data ) as any as ComponentContext<T>;\n  }\n\n}\n\nexport type ComponentContext< T = Record<string , any> , States = Record<string , any> > = ComponentExecutionContext<T , States> & T;\n\nexport function render< T extends Record<string , any> = {} , Storage extends Record<string , any> = Record<string , any> >(template: ViewTemplate<ComponentContext<any, Record<string, any>>, any>, container: HTMLElement = document.body , data = {} ) {\n\n  let context = ComponentExecutionContext.init(data);\n  return template.render( context , container);\n\n}","import { ObservableObject , Observable } from './models.js';\n\nexport function createObservableObject< Key extends string , Value extends any >( initialObject:Record< Key , Value > ){\n  return ObservableObject.init< Key , Value >( initialObject );\n}\n\nexport { ObservableObject , Observable };","import { Observable } from \"@microsoft/fast-element\";\n\nexport class ObservableObject< key extends string , value extends any = any > extends Object{\n\n  static init< key extends string , value extends any >( initialObject:Record<key , value> ){\n    let observabe = new ObservableObject< key , value >( initialObject );\n    return observabe.createProxy();\n  }\n\n  $data:Record<string , value> = {};\n\n  constructor( initialObject:Record<key , value> ){\n    super();\n\n    Object.keys( initialObject ).forEach(( key:key ) => {\n      this.set( key , initialObject[key] );\n    })\n\n  };\n\n  set = <T extends value = any>( key:key , value:T ) => {   \n\n    this.$data[`_${key}`] = value as any;\n    Observable.defineProperty( this.$data, key);\n    return this.$data[key];\n\n  }\n\n  createProxy(){\n\n    return new Proxy( this.$data , {\n      get( store , propKey:string ){\n\n        let result = undefined;\n\n        try{\n          result = store[propKey];\n        }\n        catch(error){\n          console.error(error);\n        }\n        finally{\n          return result;\n        }\n\n      },\n      set( store , propKey: string, value: any ){\n\n        if(store[propKey]){\n          store[propKey] = value;\n        }\n        else {\n          store[ `_${propKey}` ] = value;\n          Observable.defineProperty( store, propKey);\n        }\n\n        return true;\n  \n      }\n    })\n\n  }\n\n}\n\nexport { Observable };","export * from './attributeState.js';\nexport * from './state.js';\n\nimport { attr , observable } from '@microsoft/fast-element';\n\nexport {\n  attr,\n  observable,\n};","import { DecoratorAttributeConfiguration, attr } from \"@microsoft/fast-element\";\nimport { state } from './state.js';\n\n/**\n * @AttributeState decorator\n * A decorator to define a property as both an attribute and a state on a WebComponent.\n * This combines the behavior of @attr and @State decorators.\n * \n * @param {DecoratorAttributeConfiguration} options - Options to configure the attribute.\n * @returns {Function} - The decorator function.\n * \n * @example\n * ```typescript\n * // Define an editable title component using the AttributeState decorator\n * \n * customElement({\n *     name: 'editable-title',\n *     template : html`...`\n * })\n * class EditableTitle extends WebComponent {\n *     AttributeState() level: number = 2;\n *     AttributeState() editable: string = \"false\";\n *     State value: string = \"Hello World\";\n * \n *     handleInput(event) {\n *         this.value = event.target.innerText;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();\n *     }\n * }\n * ```\n */\nexport function attrState( options:DecoratorAttributeConfiguration = {} ){\n\n  return ( target, propertyKey: string ) => {\n    attr( options )( target , propertyKey );\n    state( target , propertyKey );\n  }\n\n}","import { observable } from \"@microsoft/fast-element\";\n\n/**\n * @State decorator\n * A decorator to define a state property on a WebComponent.\n * This state property is observable, and its changes are detected and handled.\n * \n * @param {Object} target - The prototype of the class where the state property is defined.\n * @param {string} propertyKey - The name of the property to be defined as a state.\n * \n * @example\n * ```typescript\n * /// Define a counter component using the State decorator\n\n * customElement({\n *     name: 'counter-element',\n *     template: html`...`\n * })\n * class CounterElement extends WebComponent {\n *     State count: number = 0;\n * \n *     increment() {\n *         this.count += 1;\n *     }\n * \n *     connectedCallback() {\n *         super.connectedCallback();s\n *     }\n * }\n * ```\n */\nexport function state(target, propertyKey: string , value:any = null , constructible = false){\n\n  if(constructible)target.constructor.states = target.constructor.states || {};\n\n  Object.defineProperty( target , propertyKey , {\n    get(){\n      return target.$states[propertyKey];\n    },\n    set(newValue){\n      target.$states[propertyKey] = newValue;\n      return true;\n    },\n    enumerable: true,\n    configurable: true\n  } );\n\n  observable(target, propertyKey);\n\n  if(value)target[propertyKey] = value;\n\n}","import { customElement , html , WebComponent } from '../../webComponent/index.js';\nimport { Router , RouteConfig } from '../router/index.js';\n\n/* The MainApplication class extends Router and specifies a type property for routing configuration. */\n@customElement({\n  name : 'main-application',\n  template : html`<slot></slot>`\n})\nclass MainApplication extends Router{\n\n  type : 'pathname-router' | 'hash-router' = 'pathname-router';\n\n  constructor( config:RouteConfig[] ){\n    super( config );\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n  }\n\n}\n\nexport declare module global{\n  interface HTMLElementTagNameMap{\n    'main-application' : MainApplication;\n  }\n}\n\n\nexport { \n  MainApplication \n};","export { \n  customElement , \n  css, \n  html, \n  Observable, \n  ViewTemplate,\n  HTMLView,\n  SyntheticView, \n  volatile \n} from \"@microsoft/fast-element\";\n\nexport { \n  WebComponent \n} from './model.js';\n\nexport { \n  attr,\n  observable,\n  state,\n  attrState,\n} from '../decorators/index.js';\n\nexport {\n  when,\n  repeat,\n  ref,\n  children,\n  slotted\n} from '../directives/index.js';","import { FASTElement } from \"@microsoft/fast-element\";\nimport { ObservableObject } from '../utils/observable-object/index.js';\n\n/* The WebComponent class extends FASTElement and provides state management functionality using\nObservableObject. */\nexport class WebComponent extends FASTElement{\n\n  /* The `static states = {};` line is declaring a static property named `states` on the `WebComponent`\n  class and initializing it as an empty object `{}`. This property is intended to hold the initial\n  state values for the component. By defining it as a static property, it is shared among all\n  instances of the `WebComponent` class rather than being specific to individual instances. This\n  allows all instances of the class to access and modify the same set of state values. */\n  static states = {};\n\n  /* The line ` = ObservableObject.init( this.constructor[\"states\"] );` is initializing an\n  instance property named `` on the `WebComponent` class. This property is being set to the\n  result of calling the `init` method of the `ObservableObject` class, passing in the initial state\n  values defined in the `states` static property of the `WebComponent` class\n  (`this.constructor[\"states\"]`). */\n  $states = ObservableObject.init( this.constructor[\"states\"] );\n\n  constructor(){\n    super();\n\n    Object.keys(this.constructor[\"states\"]).forEach( key => {\n      // delete this[key];\n      Object.defineProperty( this , key , {\n        get(){\n          return this.$states[key];\n        },\n        set( value ){\n          this.$states[key] = value;\n        }\n      } )\n      \n    });\n\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n  }\n\n  static define = FASTElement.define\n  \n}","import {\n  when,\n  repeat,\n  // ref,\n  children,\n  elements,\n  slotted,\n} from '@microsoft/fast-element';\n\nexport {\n  when,\n  repeat,\n  children,\n  elements,\n  slotted\n}\n\nexport * from './assyncAppend.js';\nexport * from './ref.js';\nexport * from './state.js';\nexport * from './style.js';\nexport * from './until.js';","import { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , html , Binding } from '@microsoft/fast-element';\nimport type { Subscriber , BindingDirective, ExpressionObserver } from '@microsoft/fast-element';\n\nexport class AsyncAppendBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class AsyncAppendDirective<T = any> extends HTMLBindingDirective {\n\n  fn:Promise<T> = null;\n  callback:( result:T ) => ViewTemplate = null;\n\n  constructor( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) {\n    super( new AsyncAppendBindig( (x) => null ) );\n    Object.assign( this , { fn , callback } );\n  }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n\n    return {\n        bind : (source:HTMLView ) => {\n\n          let target = source.targets[targetNodeId];\n\n          this.fn\n          .then(( result ) => {\n            this.callback( result ).render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n          .catch(( error ) => {\n            console.error(error)\n            html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n          })\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ){\n    return new AsyncAppendDirective( fn , callback);\n  }\n\n}\n\nHTMLDirective.define( AsyncAppendDirective );\n\nexport { Subscriber }\n\nexport const asyncAppend = <T = any>( fn:Promise<T> , callback:( result:T ) => ViewTemplate ) => AsyncAppendDirective.use<T>( fn , callback );","import { HTMLDirective, HTMLView, Binding, BindingDirective, ExpressionObserver, Subscriber, StatelessAttachedAttributeDirective } from '@microsoft/fast-element';\n\nexport interface IElementRef< T extends Node >{\n  value : T | null;\n}\n\nexport function createRef< T extends Node >():IElementRef<T>{\n  return {\n    value : null\n  }\n}\n\nexport class RefDirective<T extends Node> extends StatelessAttachedAttributeDirective<IElementRef<T>> {\n\n  options:IElementRef<T> = null;\n\n  constructor( options:IElementRef<T> ) {\n    super( options );\n    Object.assign( this , { options } )\n  }\n\n  bind(controller: HTMLView): void {\n\n    let { lastChild:target } = controller;\n\n    this.options.value = target as any;\n\n  }\n\n  static use<T extends Node>( options:IElementRef<T> ){\n    return new RefDirective<T>( options );\n  }\n\n}\n\nHTMLDirective.define( RefDirective )\n\nexport const ref = <T extends Node>( options:IElementRef<T> ) => RefDirective.use<T>( options );","// import { ViewTemplate, HTMLBindingDirective, ExecutionContext } from '@microsoft/fast-element';\nimport { State , createState } from '@lithium-framework/state';\nimport { ViewTemplate, HTMLDirective , HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class StateBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StateDirective<T = any> extends HTMLBindingDirective {\n\n    _state:State<T> = null;\n    get state(){ return this._state.mutator[0] }\n    set state( value:T ){ this._state.mutator[1](value) }\n\n    _callback:( newValue:T ) => ViewTemplate = null;\n\n    constructor( state: State<T> , callback:( newValue:T ) => ViewTemplate ) {\n        super( new StateBindig( (x) => null ) );\n        this._state = state;\n        this._callback = callback;\n    }\n\n  createBehavior():any {\n\n    let { targetNodeId } = this;\n    let view:HTMLView = null;\n\n    return {\n        bind : (source:HTMLView) => {\n\n            let target = source.targets[targetNodeId];\n\n            if(this._callback){\n\n                this._state.subscribe(() => {\n                    view.dispose();\n                    view = this._callback( this.state ).render( source , target.parentElement );\n                });\n\n                view = this._callback( this.state ).render( source , target.parentElement );\n\n            }\n\n            else{\n\n                this._state.subscribe(() => {\n                    if(\"textContent\" in target){\n                        target.textContent = `${this.state}`;\n                    }\n                });\n\n                if(\"textContent\" in target){\n                    target.textContent = `${this.state}`;\n                }\n\n            }\n\n        },\n        unbind : () => {\n            // Nettoyage si nécessaire\n        }\n    };\n\n  }\n\n  static use<T = any>( state , callback ){\n    return new StateDirective<T>( state , callback )\n  }\n\n}\n\nHTMLDirective.define( StateDirective )\n\nexport const useState = <T>( state: State<T> , callback?:( newValue:T ) => ViewTemplate ) => StateDirective.use<T>( state , callback );","import { HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\nimport { CSSProperties } from '../utils/css-object';\n\nexport class StyleBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class StyleDirective extends HTMLBindingDirective {\n\n  css:CSSProperties = null;\n\n  constructor( css:CSSProperties ) {\n      super( new StyleBindig( (x) => null ) );\n      Object.assign( this , { css } );\n\n  }\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n  let view:HTMLView = null;\n\n  return {\n      bind : (source:HTMLView) => {\n\n        let target = source.targets[targetNodeId];\n        if(target instanceof HTMLElement)Object.assign( target.style , this.css );\n\n      },\n      unbind : () => {\n          // Nettoyage si nécessaire\n      }\n  };\n\n}\n\nstatic use( css:CSSProperties ){\n  return new StyleDirective( css )\n}\n\n}\n\nHTMLDirective.define( StyleDirective );\n\nexport const style = ( css:CSSProperties ) => StyleDirective.use( css );","import { ViewTemplate , html , HTMLDirective, HTMLBindingDirective, HTMLView , Binding, BindingDirective, ExpressionObserver, Subscriber } from '@microsoft/fast-element';\n\nexport class UntilBindig extends Binding{\n\n  createObserver(subscriber: Subscriber, directive: BindingDirective): ExpressionObserver<any, any, any> {\n\n    console.log({ subscriber , directive })\n\n    return {\n      bind(controller){\n        console.log({ controller })\n      }\n    }\n\n  }\n  \n}\n\nexport class UntilDirective extends HTMLBindingDirective {\n\n  fn:Promise<ViewTemplate> = null;\n  template:ViewTemplate = null;\n\n  constructor( fn:Promise<ViewTemplate> , template:ViewTemplate ) {\n    super( new UntilBindig( (x) => null ) );\n    Object.assign( this , { fn , template } );\n}\n\ncreateBehavior():any {\n\n  let { targetNodeId } = this;\n\n  return {\n    bind : (source:HTMLView) => {\n\n      let target = source.targets[targetNodeId];\n      let loading = this.template.render( source , target instanceof HTMLElement ? target : target.parentElement );\n\n      this.fn\n      .then(( result ) => {\n        loading.dispose()\n        result.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n      .catch(( error ) => {\n        console.error(error);\n        loading.dispose();\n        html`<span>Error: ${error}</span>`.render( source , target instanceof HTMLElement ? target : target.parentElement );\n      })\n\n    },\n    unbind : () => {\n        // Nettoyage si nécessaire\n    }\n};\n\n}\n\nstatic use( fn:Promise<ViewTemplate> , template: ViewTemplate ){\n  return new UntilDirective( fn , template);\n}\n\n}\n\nHTMLDirective.define( UntilDirective );\n\nexport const until = ( fn:Promise<ViewTemplate> , template:ViewTemplate ) => UntilDirective.use( fn , template );","import { render } from '../../dom/index.js';\nimport { customElement , WebComponent , ViewTemplate , html } from '../../webComponent/index.js';\nimport RouteRecognizer, { Params } from 'route-recognizer';\n\nif ('URLPattern' in globalThis == false) { \n  import(\"urlpattern-polyfill\").then(({ URLPattern }) => { window[\"URLPattern\"] = URLPattern; })\n}\n\n/* The `BaseRouteConfig` interface is defining a structure for the configuration options that can be\nprovided for a route in the routing system. Here's a breakdown of each property within the\n`BaseRouteConfig` interface: */\ninterface BaseRouteConfig {\n  name?: string | undefined;\n  render?: ViewTemplate<{ [key: string]: string | undefined }>;\n  enter?: (params: {\n      [key: string]: string | undefined;\n  }) => Promise<boolean> | boolean;\n}\n\n/* The `interface PathRouteConfig` is extending the `BaseRouteConfig` interface and adding a new\nproperty `path` of type string to it. This means that any object that implements the\n`PathRouteConfig` interface must have all the properties defined in `BaseRouteConfig` interface\n(like `name`, `render`, `enter`) along with the additional `path` property of type string. This\nallows for more specific route configurations that include a path string for routing purposes. */\ninterface PathRouteConfig extends BaseRouteConfig {\n  path: string;\n}\n\n/* The `interface URLPatternRouteConfig` is extending the `BaseRouteConfig` interface by adding a new\nproperty `pattern` of type `URLPattern` to it. This means that any object that implements the\n`URLPatternRouteConfig` interface must have all the properties defined in the `BaseRouteConfig`\ninterface (such as `name`, `render`, `enter`) along with the additional `pattern` property of type\n`URLPattern`. */\ninterface URLPatternRouteConfig extends BaseRouteConfig {\n  pattern: URLPattern;\n}\n\ntype RouteConfig = PathRouteConfig | URLPatternRouteConfig;\n\n/* The `Routes` class extends `RouteRecognizer` and constructs routes based on the provided\n`routeConfig` array. */\nclass Routes extends RouteRecognizer{\n\n  routeConfig;\n\n  constructor( router:Router , routeConfig:RouteConfig[] ){\n    super();\n\n    routeConfig.forEach(( route:PathRouteConfig ) => {\n\n      this.add([\n        { \n          path : route.path , \n          handler : ( params ) => {\n            render( route.render , router , params )\n          },\n        }\n      ] , route.name ? { as : route.name } : null)\n\n    })\n\n  }\n\n}\n\n/* The `Router` class is a custom web component that handles routing based on either pathname or hash,\nwith configurable routes and templates for header and footer. */\n@customElement({\n  name : \"lithium-router\",\n  template : html`<slot></slot>`\n})\nclass Router extends WebComponent{\n\n  /* The line `type : 'pathname-router' | 'hash-router' = 'hash-router';` is defining a property `type`\n  in the `Router` class with a type of string literal union `'pathname-router' | 'hash-router'`.\n  This means that the `type` property can only have one of two specific string values:\n  `'pathname-router'` or `'hash-router'`. */\n  type : 'pathname-router' | 'hash-router' = 'hash-router';\n\n  /* `private _config:RouteConfig[] = [];` is defining a private property `_config` in the `Router`\n  class with an initial value of an empty array of `RouteConfig` objects. This property is used to\n  store the route configuration provided to the `Router` instance. */\n  private _config:RouteConfig[] = [];\n\n  /* The line `private _routes = new Routes(this, this._config || []);` is initializing a private\n  property `_routes` in the `Router` class with a new instance of the `Routes` class. The `Routes`\n  class is responsible for constructing routes based on the provided `routeConfig` array. */\n  private _routes = new Routes(this, this._config || []);\n\n  header:ViewTemplate<Router>;\n  footer:ViewTemplate<Router>;\n\n  get routes(){\n    return new Proxy( this._routes , {\n      get(){ return undefined; },\n      set(){ return false; }\n    } )\n  }\n\n  get config(){\n    return this._config;\n  }\n\n  set config( newConfig:RouteConfig[] ){\n    this._config = newConfig;\n    this._routes = new Routes(this, newConfig || []);\n  }\n\n  constructor( config:RouteConfig[] ){\n    super();\n    this.config = config;\n  }\n\n  outlet(){\n\n    this.clear();\n    let url = this.type == 'pathname-router' ? this.pathname : this.hash;\n    let result = this._routes.recognize( url );\n\n    Array.from( { length : result.length } , ( i , iterator ) => {\n\n      console.log({ i , iterator })\n\n      let route = result[iterator];\n      let handler = route.handler as ( params:Params ) => void;\n      handler( route.params );\n\n    });\n\n  }\n\n  onHashChange( event:HashChangeEvent ){\n    this.outlet();\n  }\n\n  normalizeHashLocation( hash:string ){\n    return hash.replace('#' , '');\n  }\n\n  get pathname(){\n    return window.location.pathname;\n  }\n\n  get hash(){\n    return this.normalizeHashLocation( window.location.hash );\n  }\n\n  clear(){\n    this.childNodes.forEach((element) => {\n      element.remove();\n    })\n  }\n\n  connectedCallback(): void {\n\n    super.connectedCallback();\n\n    if(this.type == 'hash-router'){\n      window.addEventListener( 'hashchange' , this.onHashChange.bind(this) );\n    }\n\n    this.outlet();\n\n    if(!window.location.hash)window.location.hash = '/';\n\n  }\n\n};\n\nexport declare module global{\n  interface HTMLElementTagNameMap{\n    'lithium-router' : Router;\n  }\n}\n\nexport { \n  BaseRouteConfig,\n  PathRouteConfig,\n  URLPatternRouteConfig,\n  RouteConfig,\n  Routes,\n  Router\n}","import {\n  Observable,\n  volatile\n} from '@microsoft/fast-element';\n\nexport {\n  _cssObject,\n  // Properties,\n  createCSS\n} from './css-object/index.js';\n\nexport {\n  createObservableObject,\n  ObservableObject\n} from './observable-object/index.js';\n\nimport { \n  State,\n  createState\n} from '@lithium-framework/state';\n\nimport { \n  createStorage,\n  Storage, \n  StorageKeys, \n  StorageValues, \n  StateValidator\n} from '@lithium-framework/context';\n\nimport { \n  ComponentId,\n  Segment,\n  ParentSegementId,\n  CollectionId,\n  HUID,\n  HierarchicalUUIDOptions,\n  uuid\n} from '@lithium-framework/huid';\n\nexport{\n  Observable,\n  volatile,\n  State,\n  createState,\n  createStorage,\n  Storage, \n  StorageKeys, \n  StorageValues, \n  StateValidator,\n  ComponentId,\n  Segment,\n  ParentSegementId,\n  CollectionId,\n  HUID,\n  HierarchicalUUIDOptions,\n  uuid\n}\n\nexport { }","import { \n  _cssObject \n} from './models.js';\n\nimport type {\n  CSSProperties,\n} from './types.js'\n\nexport{\n  _cssObject,\n  CSSProperties\n}\n\nexport function createCSS( css:Partial<CSSProperties> ){\n  return _cssObject.init( css );\n}","\nimport { uuid , FixedLengthString } from '@lithium-framework/huid';\nimport decamelize from 'decamelize';\n\nimport { CSSProperties } from './types.js'\n\n/** La classe `_cssObject` fournit des méthodes statiques pour travailler avec des objets CSS dans\nTypeScript, notamment l'encodage, le décodage, l'aplatissement, la normalisation et la compilation\nd'objets CSS. */\nexport class _cssObject{\n\n  private _css : Partial<CSSProperties> = {};\n\n  static init( css:Partial<CSSProperties> ){\n    return new _cssObject( css );\n  }\n\n  constructor( css:Partial<CSSProperties> ){\n    Object.assign( this._css , css );\n  }\n\n  // Transformation du cssObject en String\n  _toCssString(){\n    return `${Array.from( Object.keys( this._css ) , ( key ) => {\n      return [ decamelize( key  , {separator: '-'} ) , this._css[key] ].join(':');\n    } ).join(';')};`;\n  }\n\n  [Symbol.toPrimitive](){\n    return this._toCssString();\n  }\n\n  /**\n   * La fonction génère un UUID aléatoire en codant trois groupes de quatre zéros et en les concaténant\n   * avec des traits de soulignement.\n   * @returns une chaîne composée de trois parties séparées par des traits de soulignement. Chaque\n   * partie est un UUID (Universally Unique Identifier) codé sous la forme d'une chaîne de longueur\n   * fixe de 4 caractères.\n   */\n  static randomUUID(){\n    return `${uuid.encode( '0000' as FixedLengthString<4> )}_${uuid.encode( '0000' as FixedLengthString<4> )}${uuid.encode( '0000' as FixedLengthString<4> )}`;\n  }\n\n}"],"names":["DOM","Decorators","Directives","Utils","Component","ViewTemplate","ObservableObject","state","_state_keys","_classPrivateFieldLooseKey","ComponentExecutionContext","Record","states","$states","constructor","data","T","init","Object","defineProperty","writable","value","createState","key","States","setter","newValue","_classPrivateFieldLooseBase","includes","useState","get","JSON","parse","set","push","stringify","fromEntries","Map","Array","from","console","log","createConsumable","assign","ComponentContext","render","template","container","HTMLElement","document","body","context","Observable","createObservableObject","initialObject","Key","Value","observabe","createProxy","$data","keys","forEach","Proxy","store","propKey","result","undefined","error","attr","observable","DecoratorAttributeConfiguration","attrState","options","target","propertyKey","constructible","enumerable","configurable","customElement","html","WebComponent","Router","RouteConfig","MainApplication","_dec","name","_class","config","type","connectedCallback","global","HTMLElementTagNameMap","css","HTMLView","SyntheticView","volatile","when","repeat","ref","children","slotted","FASTElement","define","elements","HTMLDirective","HTMLBindingDirective","Binding","Subscriber","BindingDirective","ExpressionObserver","AsyncAppendBindig","createObserver","subscriber","directive","bind","controller","AsyncAppendDirective","fn","Promise","callback","x","createBehavior","targetNodeId","source","targets","then","parentElement","catch","unbind","use","asyncAppend","StatelessAttachedAttributeDirective","IElementRef","Node","createRef","RefDirective","lastChild","State","StateBindig","StateDirective","_state","mutator","_callback","view","subscribe","dispose","textContent","CSSProperties","StyleBindig","StyleDirective","style","UntilBindig","UntilDirective","loading","until","RouteRecognizer","Params","globalThis","URLPattern","window","BaseRouteConfig","enter","params","PathRouteConfig","path","URLPatternRouteConfig","pattern","Routes","router","routeConfig","route","add","handler","as","routes","_routes","_config","newConfig","header","footer","outlet","clear","url","pathname","hash","recognize","length","i","iterator","onHashChange","event","HashChangeEvent","normalizeHashLocation","replace","location","childNodes","element","remove","addEventListener","_cssObject","createCSS","createStorage","Storage","StorageKeys","StorageValues","StateValidator","ComponentId","Segment","ParentSegementId","CollectionId","HUID","HierarchicalUUIDOptions","uuid","Partial","FixedLengthString","decamelize","_css","_toCssString","separator","join","Symbol","toPrimitive","randomUUID","encode"],"version":3,"file":"module.js.map"}
>>>>>>> Stashed changes
